(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"0272":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,"label-width":"120px",size:e.$s_size,"label-position":"top",inline:""}},[a("el-row",{staticClass:"row",attrs:{type:"flex"}},[e._l(e.searchConfig,(function(t,n){return a("FormItem",{directives:[{name:"show",rawName:"v-show",value:e.needCollapse&&n>2||n<=2,expression:"needCollapse && c > 2 || c <= 2"}],key:n,attrs:{label:t.label,label_name:t.label_name,prop:t.key,label_icon:t.label_icon,label_content:t.label_content,slot_label:t.slot_label},scopedSlots:e._u([{key:"slot_label",fn:function(){return["select"===t.label_type?a("el-select",{staticClass:"FormItem_slot_label_select",style:t.slot_label_style,on:{change:function(a){return e.changeLabelSelect(a,t)}},model:{value:e.searchForm[t.label_key],callback:function(a){e.$set(e.searchForm,t.label_key,a)},expression:"searchForm[config.label_key]"}},e._l(t.options?t.options:e.options?e.options[t.label_key+"_enum"]:[],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()]},proxy:!0}],null,!0)},["input"===t.type?a("el-input",{attrs:{clearable:"",placeholder:t.placeholder?t.placeholder:"請輸入"+t.label},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.searchForm[t.key],callback:function(a){e.$set(e.searchForm,t.key,a)},expression:"searchForm[config.key]"}}):e._e(),"interval"===t.type?a("div",[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{clearable:"",placeholder:t.placeholder?t.placeholder:"請輸入最小值"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.searchForm[t.key+"_min"],callback:function(a){e.$set(e.searchForm,t.key+"_min",a)},expression:"searchForm[config.key+'_min']"}})],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v(" ~ ")]),a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{clearable:"",placeholder:t.placeholder?t.placeholder:"請輸入最大值"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.searchForm[t.key+"_max"],callback:function(a){e.$set(e.searchForm,t.key+"_max",a)},expression:"searchForm[config.key+'_max']"}})],1)],1)],1):e._e(),"select"===t.type?a("el-select",{attrs:{clearable:"",placeholder:t.placeholder?t.placeholder:"請選擇"+t.label},model:{value:e.searchForm[t.key],callback:function(a){e.$set(e.searchForm,t.key,a)},expression:"searchForm[config.key]"}},e._l(t.options?t.options:e.options?e.options[t.key+"_enum"]:[],(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"radio"===t.type?a("el-radio-group",{model:{value:e.searchForm[t.key],callback:function(a){e.$set(e.searchForm,t.key,a)},expression:"searchForm[config.key]"}},e._l(t.options,(function(t){return a("el-radio",{key:t.label,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1):e._e(),"checkbox"===t.type?a("el-checkbox-group",{model:{value:e.searchForm[t.key],callback:function(a){e.$set(e.searchForm,t.key,a)},expression:"searchForm[config.key]"}},e._l(t.options,(function(e){return a("el-checkbox",{key:e.value,attrs:{indeterminate:e.indeterminate,label:e.label,disabled:e.disabled}})})),1):e._e(),"datetimerange"===t.type?a("el-date-picker",{staticClass:"date-piceker",attrs:{type:"datetimerange","picker-options":t.pickerOptions||"timestamp",format:t.format,"value-format":t.valueFormat||"timestamp","range-separator":"至","start-placeholder":"开始時間","end-placeholder":"结束時間"},on:{change:function(a){e.datePickerChange(a,t)}},model:{value:e.searchForm[t.key],callback:function(a){e.$set(e.searchForm,t.key,a)},expression:"searchForm[config.key]"}}):e._e(),"year"===t.type||"month"===t.type||"week"===t.type?a("el-date-picker",{attrs:{type:t.type,placeholder:"選擇月"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}):e._e(),"autocomplete"===t.type?a("el-autocomplete",{staticClass:"inline-input",attrs:{clearable:"","value-key":t.valueKey?t.valueKey:"label","fetch-suggestions":t.fetchSuggestions,placeholder:"請輸入内容"},on:{select:function(a){e.handleSelect(a,t)},change:function(a){e.handleChange(a,t)}},model:{value:e.searchForm[t.key+"_query_str"],callback:function(a){e.$set(e.searchForm,t.key+"_query_str",a)},expression:"searchForm[`${config.key}_query_str`]"}}):e._e()],1)})),e._t("default"),a("FormItem",{staticClass:"search-action-con"},[a("div",{staticClass:"search-action"},[a("el-button",{attrs:{size:e.$s_size,icon:"el-icon-search",type:"primary"},on:{click:e.onSearch}},[e._v("查詢")]),a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:e.$s_size,icon:"el-icon-refresh"},on:{click:e.onInit}}),e.searchConfig.length>3?a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{size:e.$s_size,type:"text"},on:{click:function(t){e.needCollapse=!e.needCollapse}}},[e._v(" "+e._s(e.needCollapse?"折疊":"展開")),a("i",{class:e.needCollapse?"el-icon-arrow-up":"el-icon-arrow-down"})]):e._e()],1)])],2)],1)],1)},o=[],s=(a("d3b7"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{attrs:{lg:e.size.lg,sm:e.size.sm,xs:e.size.xs}},[a("el-form-item",e._b({},"el-form-item",e.$attrs,!1),[e.$attrs.label_name?a("el-popover",{attrs:{slot:"label",placement:"top-start",title:e.$attrs.label_title||"",width:"200",trigger:"hover",content:e.$attrs.label_content},slot:"label"},[a("el-link",{attrs:{slot:"reference",underline:!1},slot:"reference"},[e._v(e._s(e.$attrs.label_name)+" "),a("i",{class:e.$attrs.label_icon})])],1):e._e(),e.$attrs.slot_label?a("div",{attrs:{slot:"label"},slot:"label"},[e._t("slot_label",[a("div")])],2):e._e(),e._t("default")],2)],1)}),r=[],l={name:"FormItem",data:function(){return{}},computed:{size:function(){var e=parseInt(this.$attrs.span)||parseInt(6);return{lg:e,md:e+2,sm:e+6,xs:24}}}},i=l,c=a("2877"),p=Object(c["a"])(i,s,r,!1,null,"d994e262",null),m=p.exports,h={name:"SearchForm",components:{FormItem:m},props:{searchConfig:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){}}},data:function(){return{needCollapse:!1,dateTime:[],searchForm:{},value2:""}},created:function(){this.searchForm=this.initForm(),this.$emit("init",this.searchForm)},methods:{handleChange:function(e,t){e||(this.searchForm[t.key]="")},handleSelect:function(e,t){this.searchForm[t.key]=e.value},datePickerChange:function(e,t){"datetimerange"===t.type&&(e?t.is_simple?(this.searchForm["start"]=e[0]/1e3,this.searchForm["end"]=e[1]/1e3):(this.searchForm["".concat(t.key,"_start")]=e[0]/1e3,this.searchForm["".concat(t.key,"_end")]=e[1]/1e3):t.is_simple?(this.searchForm["start"]="",this.searchForm["end"]=""):(this.searchForm["".concat(t.key,"_start")]="",this.searchForm["".concat(t.key,"_end")]=""))},onInit:function(){this.searchForm=this.initForm(),this.$emit("init",this.searchForm)},onSearch:function(){this.$emit("search",this.searchForm)},restForm:function(){var e=this,t={},a=["datetimerange"];return this.searchConfig.forEach((function(n){-1===a.indexOf(n.type)?("autocomplete"===n.type?t["".concat(n.key,"_query_str")]="":"interval"===n.type&&(n.is_simple?(t["min"]="",t["max"]=""):(t["".concat(n.key,"_min")]="",t["".concat(n.key,"_max")]="")),t[n.key]=""):n.slot_label?t[n.label_key]=e.options["".concat(n.label_key,"_enum")][0].value:(t[n.key]=[],n.is_simple?(t["start"]="",t["end"]=""):(t["".concat(n.key,"_start")]="",t["".concat(n.key,"_end")]=""))})),t},initForm:function(){var e=this,t={},a=["datetimerange"],n=["interval"];return this.searchConfig.forEach((function(o){var s=-1!==a.indexOf(o.type),r=-1!==n.indexOf(o.type);o.value?(t[o.key]=o.value,s?o.is_simple?(t["start"]=o.value[0],t["end"]=o.value[1]):(t["".concat(o.key,"_start")]=o.value[0],t["".concat(o.key,"_end")]=o.value[1]):r&&(o.is_simple?(t["min"]=o.value[0],t["max"]=o.value[1]):(t["".concat(o.key,"_min")]=o.value[0],t["".concat(o.key,"_max")]=o.value[1]))):o.slot_label?(t[o.label_key]=e.options["".concat(o.label_key,"_enum")][0].value,r?o.is_simple?(t["min"]="",t["max"]=""):(t["".concat(o.key,"_min")]="",t["".concat(o.key,"_max")]=""):t[o.key]=""):s?(t[o.key]=[],o.is_simple?(t["start"]="",t["end"]=""):(t["".concat(o.key,"_start")]="",t["".concat(o.key,"_end")]="")):r?o.is_simple?(t["min"]="",t["max"]=""):(t["".concat(o.key,"_min")]="",t["".concat(o.key,"_max")]=""):s||("autocomplete"===o.type&&(t["".concat(o.key,"_query_str")]=""),t[o.key]="")})),t},changeLabelSelect:function(e,t){this.searchForm[t.key]="","interval"===t.type?t.is_simple?(this.searchForm["min"]="",this.searchForm["max"]=""):(this.searchForm["".concat(t.key,"_min")]="",this.searchForm["".concat(t.key,"_max")]=""):"datetimerange"===t.type&&(t.is_simple?(this.searchForm["start"]="",this.searchForm["end"]=""):(this.searchForm["".concat(t.key,"_start")]="",this.searchForm["".concat(t.key,"_end")]=""))}}},u=h,d=(a("ba7e"),Object(c["a"])(u,n,o,!1,null,"81e8c440",null));t["a"]=d.exports},"0599":function(e,t,a){},"21fd":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hf-table"},[a("el-popover",{attrs:{placement:"bottom-end","popper-class":"table-cloumn-setting-popper",trigger:"click"}},[a("div",{staticClass:"setting-row-content"},[a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:e.delStorage}},[e._v("恢復當前表格設置")])],1),a("draggable",{attrs:{handle:".el-icon-s-operation"},on:{end:e.updateTable},model:{value:e.storageList,callback:function(t){e.storageList=t},expression:"storageList"}},e._l(e.storageList,(function(t){return a("div",{key:t.label,staticClass:"setting-row"},[a("i",{staticClass:"el-icon-s-operation"}),a("el-checkbox",{staticClass:"label",on:{change:function(a){return e.showOrHidden(a,t)}},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"clo.show"}},[e._v(e._s(t.label))])],1)})),0)],1),a("div",{staticClass:"el-icon-setting-t",attrs:{slot:"reference"},slot:"reference"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"显隐列",placement:"top"}},[a("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-menu"}})],1)],1)]),a("div",{staticClass:"table-operate-btn-content"},[e._t("operateBtnContent",[a("div",{staticClass:"operate-btn-content"},[a("div",[e._t("btnContentLeft",[a("div")])],2),a("div",[e._t("btnContentRight",[a("div")])],2)])])],2),a("div",[a("new-table",{ref:"table",attrs:{config:e.config}})],1)],1)},o=[],s=a("5530"),r=(a("e9c4"),a("4de4"),a("d3b7"),a("c7cd"),a("159b"),a("c740"),a("14d9"),a("7db0"),a("b76a")),l=a.n(r),i=(a("b64b"),{name:"MyTable",props:{config:{type:Object,default:function(){return{}}}},render:function(e){var t=this,a={};return Object.keys(this.$parent.$scopedSlots).forEach((function(e){"default"!==e&&(a[e]=t.$parent.$scopedSlots[e])})),e("el-table",{ref:"elTable",key:this.config.key||"",attrs:Object(s["a"])({},this.config.attrs),on:Object(s["a"])({},this.config.listeners),scopedSlots:a},this.config.children)}}),c={newTable:i,draggable:l.a},p={name:"HfTable",components:c,props:{storageName:{type:String,required:!0}},data:function(){return{showTable:!1,storageList:[],name:"",config:{children:[],attrs:{},listeners:{},key:""}}},watch:{$attrs:{handler:function(e){this.$set(this.config,"attrs",e)},deep:!0,immediate:!0}},mounted:function(){this.initStorage(),this.updateTable()},methods:{reload:function(){var e=this;this.$nextTick((function(){e.initStorage(),e.updateTable()}))},getInstance:function(){return this.$refs.table.$refs&&this.$refs.table.$refs.elTable},delStorage:function(){var e=this;this.$confirm("恢復當前表格設置将清除当前表格设置并刷新页面是否继续?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=window.localStorage.getItem("tableStorage")?JSON.parse(window.localStorage.getItem("tableStorage")):{};t[e.storageName]=[],window.localStorage.setItem("tableStorage",JSON.stringify(t)),location.reload()}))},delAllStorage:function(){this.$confirm("恢复系统表格设置将清除当前表格设置并刷新页面是否继续?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){window.localStorage.removeItem("tableStorage"),location.reload()}))},showOrHidden:function(e,t){if(!e&&0===this.storageList.filter((function(e){return e.show})).length)return this.$message.warning("列表最少显示一列"),void this.$nextTick((function(){t.show=!0}));this.updateTable()},setFixed:function(e,t){t.fixed===e?t.fixed=!1:t.fixed=e,this.updateTable()},initStorage:function(){var e=this;this.storageList=[];var t=window.localStorage.getItem("tableStorage")?JSON.parse(window.localStorage.getItem("tableStorage")):{},a=t[this.storageName]?t[this.storageName]:[];this.$vnode.componentOptions.children.forEach((function(e){if(e.componentOptions&&!e.componentOptions.propsData.type&&a.findIndex((function(t){return t.label===e.componentOptions.propsData.label}))<0){var t=JSON.parse(JSON.stringify(e.componentOptions.propsData));void 0===t.fixed||!1===t.fixed?t.fixed=!1:t.fixed=t.fixed?t.fixed:"left",a.push(Object(s["a"])({fixed:!1,show:!0},t))}})),a=a.filter((function(t){return e.$vnode.componentOptions.children.find((function(e){return e.componentOptions&&t.label===e.componentOptions.propsData.label}))})),this.storageList=a},updateTable:function(){var e=this,t=this.$vnode.componentOptions.children.filter((function(e){return e.componentOptions&&e.componentOptions.propsData.type}));this.storageList.forEach((function(a){if(a.show){var n=e.$vnode.componentOptions.children.find((function(e){return e.componentOptions&&e.componentOptions.propsData.label===a.label}));n&&(n.componentOptions.propsData.fixed=a.fixed,t.push(n))}})),this.config.children=t,this.config.attrs=this.$attrs,this.config.listeners=this.$listeners,this.config.key=Math.random()+"";var a=window.localStorage.getItem("tableStorage")?JSON.parse(window.localStorage.getItem("tableStorage")):{};a[this.storageName]=this.storageList,window.localStorage.setItem("tableStorage",JSON.stringify(a))}}},m=p,h=(a("a536"),a("2877")),u=Object(h["a"])(m,n,o,!1,null,"6d28b81e",null);t["a"]=u.exports},a536:function(e,t,a){"use strict";a("fea0")},ba7e:function(e,t,a){"use strict";a("0599")},fea0:function(e,t,a){}}]);